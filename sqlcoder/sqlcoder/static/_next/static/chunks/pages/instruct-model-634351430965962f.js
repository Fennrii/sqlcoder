(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{2252:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instruct-model",function(){return t(14373)}])},31143:function(e,s,t){"use strict";var a=t(28598),n=t(1887),r=t.n(n);s.Z=()=>(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},62429:function(e,s,t){"use strict";var a=t(28598);t(82684);var n=t(79869),r=t(12691),l=t.n(r);s.Z=e=>{let{id:s,children:t}=e,{Content:r,Sider:i}=n.Layout,o=[{key:"manage-database",title:"Manage Database",icon:(0,a.jsx)(l(),{href:"/extract-metadata",children:"\uD83D\uDCBE Manage DB"})},{key:"query-data",title:"Query Data",icon:(0,a.jsx)(l(),{href:"/query-data",children:"\uD83D\uDD0D Query Data"})}];return(0,a.jsx)(n.Layout,{style:{height:"100vh"},children:(0,a.jsxs)(r,{children:[(0,a.jsx)(i,{style:{height:"100vh",position:"fixed"},children:(0,a.jsx)(n.v2,{style:{width:200,paddingTop:"2em",paddingBottom:"2em"},mode:"inline",selectedKeys:[s],items:o})}),(0,a.jsx)("div",{style:{paddingLeft:240,paddingTop:30,backgroundColor:"#f5f5f5"},children:t})]})})}},14373:function(e,s,t){"use strict";t.r(s);var a=t(28598),n=t(82684),r=t(31143),l=t(62429),i=t(79869);s.default=()=>{let[e,s]=(0,n.useState)(!0),[t]=i.l0.useForm(),[o,d]=(0,n.useState)([]),[c,h]=(0,n.useState)([]);return(0,n.useEffect)(async()=>{let e=await fetch("http://localhost:1235/instruct/get_glossary_golden_queries",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();t.setFieldsValue({glossary:a.glossary}),h(a.golden_queries),s(!1)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)(l.Z,{id:"instruct-model",children:[(0,a.jsx)("h1",{children:"Instruct Model"}),(0,a.jsx)("h3",{children:"Update glossary"}),(0,a.jsxs)("div",{style:{maxWidth:800},children:[(0,a.jsxs)("div",{children:["The glossary is a list of instructions that the model will use to generate queries.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"An example of a glossary entry is:",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{style:{fontFamily:"monospace"},children:"- When a user asks for APR time, they are asking for Average Payment Reimbursement. You can calculate this by dividing the total amount reimbursed by the number of reimbursement requests."}),"."]}),(0,a.jsxs)(i.l0,{name:"glossary",layout:"vertical",form:t,initialValues:{remember:!0},style:{paddingTop:"1em"},defaultValue:{glossary:o},loading:e,disabled:e,onFinish:async e=>{let s=await fetch("http://localhost:1235/instruct/update_glossary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({glossary:e.glossary})}),t=await s.json();console.log(t)},children:[(0,a.jsx)(i.l0.Item,{label:"Glossary",name:"glossary",children:(0,a.jsx)(i.II.TextArea,{rows:5})}),(0,a.jsx)(i.l0.Item,{children:(0,a.jsx)(i.zx,{type:"primary",htmlType:"submit",children:"Update Glossary"})})]})]}),(0,a.jsx)("h3",{children:"Golden Queries"}),c.length>0?(0,a.jsxs)(i.X2,{style:{marginTop:"1em",position:"sticky",top:0,paddingBottom:"1em",paddingTop:"1em",backgroundColor:"white",zIndex:100},children:[(0,a.jsx)(i.JX,{xs:{span:24},md:{span:1},style:{overflowWrap:"break-word"},children:(0,a.jsx)("b",{children:" "})}),(0,a.jsx)(i.JX,{xs:{span:24},md:{span:6},style:{overflowWrap:"break-word"},children:(0,a.jsx)("b",{children:"Question"})}),(0,a.jsx)(i.JX,{xs:{span:24},md:{span:16},style:{overflowWrap:"break-word"},children:(0,a.jsx)("b",{children:"SQL"})}),(0,a.jsx)(i.JX,{xs:{span:24},md:{span:1},style:{overflowWrap:"break-word"},children:(0,a.jsx)("b",{children:"Good?"})})]}):null,c.length>0&&c.map((e,s)=>(0,a.jsxs)(i.X2,{style:{marginTop:"1em"},gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(i.JX,{xs:{span:24},md:{span:1},style:{overflowWrap:"break-word"},children:(0,a.jsx)(i.zx,{ghost:!0,onClick:()=>{let e=[...c];e.splice(s,1),h(e)},children:"â›”"})}),(0,a.jsx)(i.JX,{xs:{span:24},md:{span:6},style:{overflowWrap:"break-word"},children:(0,a.jsx)(i.II.TextArea,{placeholder:"Question",defaultValue:e.question,autoSize:{minRows:2},onChange:e=>{let t=[...c];t[s].question=e.target.value,h(t)}},s)}),(0,a.jsx)(i.JX,{xs:{span:24},md:{span:16},style:{overflowWrap:"break-word"},children:(0,a.jsx)(i.II.TextArea,{placeholder:"SQL",defaultValue:e.sql,autoSize:{minRows:2},onChange:e=>{let t=[...c];t[s].sql=e.target.value,h(t)}},s)}),(0,a.jsx)(i.JX,{xs:{span:24},md:{span:1},style:{overflowWrap:"break-word"},children:(0,a.jsx)(i.XZ,{checked:e.user_validated,onChange:e=>{let t=[...c];t[s].user_validated=e.target.checked,h(t)}})})]},s)),(0,a.jsxs)(i.X2,{children:[(0,a.jsx)(i.JX,{span:24,style:{marginTop:"1em"},children:(0,a.jsx)(i.zx,{type:"primary",onClick:()=>{let e=[...c];e.push({question:"",sql:"",user_validated:!1}),h(e)},children:"Add new row"})}),(0,a.jsx)(i.JX,{span:24,style:{marginTop:"1em"},children:(0,a.jsx)(i.zx,{type:"primary",onClick:async()=>{let e=await fetch("http://localhost:1235/instruct/update_golden_queries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({golden_queries:c})}),s=await e.json();console.log(s)},children:"Update Golden Queries on Server"})})]})]})]})}}},function(e){e.O(0,[238,774,888,179],function(){return e(e.s=2252)}),_N_E=e.O()}]);